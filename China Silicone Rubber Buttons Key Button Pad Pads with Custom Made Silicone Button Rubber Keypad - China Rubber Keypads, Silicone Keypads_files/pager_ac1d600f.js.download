var Pager=function(){var f=new Clazz({config:{index:-1,total:-1,max:-1},inherit:Component},function(b){this.setConfig(b);this.__init()});f.extend({__init:function(){this.attributes=util.extend(!0,{},this.config);this._previousAttributes=null;this.changed={}},set:function(b,a){a=a||{};this.changed={};this._previousAttributes=util.extend(!0,{},this.attributes,b);for(var c in b)this.attributes[c]!==b[c]&&(this.changed[c]=this.attributes[c]=b[c]);this.hasChanged()&&!a.silent&&this.fire("change",this.changed)},
get:function(b){return this.attributes[b]},previousAttributes:function(){return this._previousAttributes},hasChanged:function(b){var a=!1;if(b)a=b in this.changed;else for(var c in this.changed){a=!0;break}return a},toJSON:function(){return util.extend(!0,{},this.attributes)}});var h=function(){var b=function(a){var b=this;this.model=a.model;this.$el=$(a.el);this.template="function"===typeof a.template?a.template:template(a.template||'{{ if(total \x3e 1){ }}\r\n\x3cdiv class\x3d"pager"\x3e\r\n\t\x3cdiv class\x3d"page-num"\x3e\r\n\t\t\x3ca href\x3d"javascript:void(\'{{\x3dtxt_prev}}\')" class\x3d"prev J-prev{{- index \x3d\x3d\x3d 0 ? \' page-dis\' : \'\' }}" rel\x3d"nofollow"\x3e\x3ci class\x3d"icon ob-icon micon"\x3e\x26#xe009;\x3c/i\x3e{{\x3dhtml_prev}}\x3c/a\x3e\r\n\t\t\r\n\t\t{{ if(start \x3e 0){ }}\r\n\t\t\t\x3ca href\x3d"javascript:void(\'{{\x3dbeforeGoto}}1{{\x3dafterGoto}}\')" class\x3d"J-pager-item" rel\x3d"nofollow" index\x3d"0"\x3e1\x3c/a\x3e\r\n\t\t{{ } }}\r\n\t\t\r\n\t\t{{ if(start \x3e 1){ }}\r\n\t\t\t\x3cstrong class\x3d"omit"\x3e···\x3c/strong\x3e\r\n\t\t{{ } }}\r\n\t\t\r\n\t\t{{ for(var i \x3d start; i \x3c end; i++){ }}\r\n\t\t\t{{ if(i \x3d\x3d\x3d index){  }}\r\n\t\t\t\t\x3cstrong\x3e{{\x3d i + 1 }}\x3c/strong\x3e\r\n\t\t\t{{ }else{ }}\r\n\t\t\t\t\x3ca href\x3d"javascript:void(\'{{\x3dbeforeGoto}}{{\x3d i + 1 }}{{\x3dafterGoto}}\')" class\x3d"J-pager-item" rel\x3d"nofollow" index\x3d"{{\x3d i }}"\x3e{{\x3d i + 1 }}\x3c/a\x3e\r\n\t\t\t{{ } }}\r\n\t\t{{ } }}\r\n\t\t\r\n\t\t{{ if(end \x3c total - 1){ }}\r\n\t\t\t\x3cstrong class\x3d"omit"\x3e···\x3c/strong\x3e\r\n\t\t{{ } }}\r\n\t\t\r\n\t\t{{ if(end \x3c total){ }}\r\n\t\t\t\x3ca href\x3d"javascript:void(\'{{\x3dbeforeGoto}}{{\x3d total }}{{\x3dafterGoto}}\')" class\x3d"J-pager-item" rel\x3d"nofollow" index\x3d"{{\x3d total - 1 }}"\x3e{{\x3d total }}\x3c/a\x3e\r\n\t\t{{ } }}\r\n\t\t\r\n\t\t\x3ca href\x3d"javascript:void(\'{{\x3dtxt_next}}\')" class\x3d"next J-next{{- index \x3d\x3d\x3d total - 1 ? \' page-dis\' : \'\' }}" rel\x3d"nofollow"\x3e{{\x3dhtml_next}}\x3ci class\x3d"icon ob-icon micon"\x3e\x26#xe008;\x3c/i\x3e\x3c/a\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n{{ } }}');
this._text=a.text;var d=a.events||{"click .J-pager-item":"changeItem","click .J-next":"next","click .J-nextAll":"nextAll","click .J-prev":"prev","click .J-prevAll":"prevAll"};this.initialize();for(var g in d)void function(a){var c=a.split(/\s+/);this.$el.delegate(c[1],c[0],function(c){b[d[a]].call(b,c)})}.call(this,g)};b.prototype={initialize:function(){this.render()},computedPages:function(a,b,d){a-=Math.floor(d/2);var c=(0>a?0:a)+d;c=c>b?b:c;a=c-d;return{start:0>a?0:a,end:c}},render:function(){if(this.model){var a=
this.model.toJSON();util.extend(!0,a,this.computedPages(a.index,a.total,a.max),this._text);this.$el.html(this.template(a))}},changeItem:function(a){a.preventDefault();this.model.set({index:parseInt(a.target.getAttribute("index"))||0})},next:function(a){a.preventDefault();a=this.model.get("total")-1;var b=this.model.get("index");this.model.set({index:b+1>a?a:b+1})},nextAll:function(a){a.preventDefault();this.model.set({index:this.model.get("total")-1})},prev:function(a){a.preventDefault();a=this.model.get("index");
this.model.set({index:0>a-1?0:a-1})},prevAll:function(a){a.preventDefault();this.model.set({index:0})}};return b}(),e=new Abstract({go:function(b){},next:function(b){},set:function(b){}});e=new Clazz(e,{config:{index:0,max:10,total:0,holder:null,tmpl:null,silent:!1,text:{txt_prev:"上一页",html_prev:"上一页",txt_next:"下一页",html_next:"下一页",beforeGoto:"第",afterGoto:"页"}},inherit:Component},function(b){b=this.setConfig(b);var a=this.elems.$wrap=$('\x3cdiv class\x3d"J-pager-wrap"\x3e\x3c/div\x3e');$(b.holder).replaceWith(a);
var c=new f({index:0,max:b.max||8,total:b.total||0}),d=new h({model:c,el:a,template:b.tmpl,text:this.config.text}),e=this;c.on("change",function(a){d.render();c.hasChanged("index")&&e.fire("go",{from:c.previousAttributes().index,index:c.get("index")});e.fire("change",{from:c.previousAttributes().index,index:c.get("index"),model:c.toJSON()})});this._.model=c;this._.view=d;this.go(b.index||0,b.silent)});e.extend({go:function(b,a){b<this.config.total&&0<=b&&this._.model.set({index:b})},next:function(b){var a=
(this._.model.get("index")+b+10*this.config.total)%this.config.total;this.go(a);this.fire("next",{step:b,from:this._.model.get("index"),index:a})},set:function(b,a){this.setConfig(b);this._.model.set(b,a);this.fire("config",{config:b})},render:function(){this._.view.render()}});return e}.call(this);